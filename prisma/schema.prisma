generator client {
  provider = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

model User {
  id               String   @id @default(uuid())
  email            String   @unique
  password         String
  name             String
  phone            String
  rollNumber       String
  qrCodePath       String?
  sportsExperience String[]
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  bookings Booking[]
  gymLogs  GymLog[]
}

model Sport {
  id              String   @id @default(uuid())
  name            String   @unique
  numberOfCourts  Int
  totalEquipments String[] 
  equipmentsInUse String[] @default([]) 
  courtsInUse     Int      @default(0)
  courtData       Json?
  maxCapacity     Int? 
  numPlayers      Int?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Booking {
  id               String   @id @default(uuid())
  userId           String
  user             User     @relation(fields: [userId], references: [id])
  sportName        String
  issuedEquipments String[] 

  numberOfPlayers  Int
  startTime        String
  endTime          String
  date             String
  qrDetail         String?
  status           String
  endDate          String?
  courtNo          String?
  scanned          Boolean  @default(false)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model Match {
  id        String   @id @default(uuid())
  sportName String
  team1     String
  team2     String
  score1    String
  score2    String
  status    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model GuideApplication {
  id          String   @id @default(uuid())
  email       String
  option      String
  sportName   String
  level       String?
  resolved    Boolean  @default(false)
  time        String?
  description String?
  avDays      String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Invite {
  id           String   @id @default(uuid())
  sport        String
  venue        String
  date         String
  time         String
  email        String
  name         String
  mobileNumber String
  show         Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
model GymLog {
  id        String   @id @default(uuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  entryTime DateTime @default(now())
  exitTime  DateTime?
  duration  Float?   
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
